{% extends "mango/home/templates/base.html" %}
{% load insecure %}

{% block head %}
<style>
    .test {
        border-bottom: 1px solid rgb(221, 221, 221);
        margin-bottom: 30px;
        padding-bottom: 10px;
    }
</style>
{% endblock head %}

    {% block serverside %}
        <div id="ServerWrap">
        	These are server side rendered templates, using Django's built in tags and filters.
        	<hr>
            {% include "mango/home/templates/includes/var_simple.html" %}
            {% include "mango/home/templates/includes/var_filter.html" %}
            {% include "mango/home/templates/includes/var_safe.html" %}
            {% include "mango/home/templates/includes/conditions.html" %}
            {% include "mango/home/templates/includes/loop_conditions_nesting.html" %}
        </div>

    {% endblock serverside %}


    {% block clientside %}
        <div id="DjangoClientWrap">
            These are client side rendered template, using a Django template language parser.
            <hr>
        </div>
        
        <script type="text/template" id="simple-variable-usage">
            {% include_verbatim "mango/home/templates/includes/var_simple.html" %}
        </script>

        <script type="text/template" id="variable-with-template-filter">
            {% include_verbatim "mango/home/templates/includes/var_filter.html" %}
        </script>

		<script type="text/template" id="script-injection">
            {% include_verbatim "mango/home/templates/includes/var_safe.html" %}
		</script>
		
		<script type="text/template" id="basic-conditional">
            {% include_verbatim "mango/home/templates/includes/conditions.html" %}
        </script>
		
        <script type="text/template" id="nested-conditions-and-loops">
            {% include_verbatim "mango/home/templates/includes/loop_conditions_nesting.html" %}
        </script>
    {% endblock clientside %}



    {% block foot %}
        <script>
			var data = {
				"numerator": {{ numerator }},
				"denominator": {{ denominator }},
				"fraction": {{ fraction }},
				"phrase": "{{ phrase }}",
				"script_injection": "{{ script_injection_js|escapejs }}",
				"fruits": [{% for fruit in fruits %}"{{ fruit }}"{% if not forloop.last %},{% endif %}{% endfor %}],
				"plans": {
					{% for key, value in plans.items %}
						"{{ key }}":
						{% if key == "professional" %}
							[{% for item in value %}"{{ item }}"{% if not forloop.last %},{% endif %}{% endfor %}]
						{% else %}
							"{{ value }}"
						{% endif %}
						{% if not forloop.last %},{% endif %}
					{% endfor %}
				}
			};        
            var svu = mango.template($('#simple-variable-usage').html());
            $('#DjangoClientWrap').append(svu(data));
			
			var svu = mango.template($('#variable-with-template-filter').html());
			$('#DjangoClientWrap').append(svu(data));

			var svu = mango.template($('#script-injection').html());
			$('#DjangoClientWrap').append(svu(data));
			
			var svu = mango.template($('#basic-conditional').html());
			$('#DjangoClientWrap').append(svu(data));

            var svu = mango.template($('#nested-conditions-and-loops').html());
            $('#DjangoClientWrap').append(svu(data));

        console.log($('#nested-conditions-and-loops').html())
        </script>
    {% endblock foot %}
